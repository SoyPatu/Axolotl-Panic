<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AXOLOTL PANIC - DELUXE EDITION</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Fredoka One', cursive;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
            transition: all 0.5s ease;
        }

        /* MEN√ö PRINCIPAL */
        #menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(45deg, #ee4cb7, #6be5f6);
            z-index: 1000;
        }

        #menu h1 {
            font-size: clamp(3rem, 8vw, 8rem);
            background: linear-gradient(45deg, #f9f86a, #ee4cb7, #6be5f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 3rem;
            text-shadow: 0 0 30px rgba(255,255,255,0.5);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 20px #ee4cb7); }
            to { filter: drop-shadow(0 0 30px #6be5f6); }
        }

        .btn-menu {
            width: 300px;
            max-width: 90vw;
            padding: 1.5rem 2rem;
            margin: 1rem;
            font-size: clamp(1.2rem, 4vw, 2rem);
            background: linear-gradient(45deg, #f9f86a, #ee4cb7);
            color: #333;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .btn-menu:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 25px 50px rgba(0,0,0,0.4);
        }

        /* PANTALLAS MODAL */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-content {
            background: linear-gradient(135deg, #f9f86a, #ee4cb7);
            padding: 3rem;
            border-radius: 30px;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 2rem;
            font-size: 3rem;
            cursor: pointer;
            color: #333;
        }

        /* PANTALLA DE JUEGO */
        #game {
            display: none;
            min-height: 100vh;
            padding: 2rem;
        }

        /* JUGADORES */
        .jugadores {
            display: flex;
            justify-content: space-around;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .jugador-box {
            background: linear-gradient(135deg, #f0f8ff, #e6f3ff);
            border: 4px solid transparent;
            border-radius: 20px;
            padding: 1.5rem;
            min-width: 200px;
            flex: 1;
            max-width: 250px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .jugador-tu { background: linear-gradient(135deg, #ffebee, #ffcdd2); }
        .jugador-bot { background: linear-gradient(135deg, #e1bee7, #ce93d8); }

        .jugador-activo {
            border-color: #ee4cb7 !important;
            box-shadow: 0 0 30px #ee4cb7 !important;
            transform: scale(1.1);
        }

        .jugador-nombre { 
            font-size: 1.8rem; 
            font-weight: bold; 
            margin-bottom: 1rem;
            color: #ee4cb7;
        }

        .jugador-stat {
            font-size: 1.1rem;
            margin: 0.5rem 0;
            color: #555;
        }

        /* INDICADOR DE TURNO */
        .turno-indicator {
            font-size: clamp(2rem, 6vw, 4rem);
            margin: 2rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #6be5f6, #4fc3f7);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .nombre-turno { color: #e3f2fd; text-shadow: 0 0 10px #bbdefb; }

        /* BOTONES DE ACCI√ìN */
        .acciones {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .btn-accion {
            padding: 1rem 2rem;
            font-size: 1.3rem;
            background: linear-gradient(45deg, #ee4cb7, #f9f86a);
            color: #333;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .btn-accion:hover:not(:disabled) {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .btn-accion:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* CARTAS ALMACENADAS */
        .cartas-almacenadas {
            background: linear-gradient(135deg, #fff9c4, #fff176);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            min-height: 120px;
        }

        .cartas-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .carta-almacenada {
            padding: 1rem 1.5rem;
            background: linear-gradient(45deg, #6be5f6, #ee4cb7);
            color: #333;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .carta-almacenada:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        /* FICHAS */
        .fichas-container {
            margin: 2rem 0;
        }

        .fichas-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .ficha {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 5px solid #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .ficha-gris { background: #ccc; }
        .ficha-rosa { background: #ffc1cc; border-color: #ff69b4; }
        .ficha-cafe { background: #d7ccc8; border-color: #8b4513; }
        .ficha-amarilla { background: #fff9c4; border-color: #f9f86a; color: #333; }

        .ficha:hover:not(.revelada) {
            transform: scale(1.2);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .ficha.seleccionada {
            border-color: #6be5f6 !important;
            box-shadow: 0 0 20px #6be5f6;
            transform: scale(1.3);
        }

        /* TIENDA */
        #tienda .tienda-item {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            padding: 1.5rem;
            margin: 1rem;
            border-radius: 20px;
            text-align: center;
        }

        .btn-comprar {
            background: linear-gradient(45deg, #4caf50, #81c784);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 0.5rem;
        }

        .btn-comprar:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* FIN DEL JUEGO */
        #fin {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.9);
            justify-content: center;
            align-items: center;
            z-index: 3000;
            flex-direction: column;
        }

        .ranking {
            background: linear-gradient(135deg, #f9f86a, #ee4cb7);
            padding: 3rem;
            border-radius: 30px;
            max-width: 600px;
            text-align: center;
        }

        .ranking-item {
            font-size: 2rem;
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
        }

        .ganador {
            font-size: 3.5rem !important;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: none;
        }

        /* BOT√ìN SALIR */
        #salir-juego {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 100;
        }

        /* TIMER */
        .timer {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #ee4cb7, #f9f86a);
            color: #333;
            padding: 1rem 2rem;
            border-radius: 30px;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            z-index: 100;
        }

        .timer-critico { animation: pulse-red 0.5s infinite; }

        @keyframes pulse-red {
            0%, 100% { background: #ff6b6b; }
            50% { background: #ee4cb7; }
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .jugadores { flex-direction: column; align-items: center; }
            .acciones { flex-direction: column; align-items: center; }
            .fichas-grid { gap: 0.5rem; }
            .ficha { width: 60px; height: 60px; }
        }
    </style>
</head>
<body>

    <!-- MEN√ö PRINCIPAL -->
    <div id="menu">
        <h1>ü¶é AXOLOTL PANIC<br>DELUXE EDITION ü¶é</h1>
        <button class="btn-menu" onclick="iniciarJuego()">JUGAR</button>
        <button class="btn-menu" onclick="mostrarTutorial()">TUTORIAL</button>
        <button class="btn-menu" onclick="mostrarCreditos()">CR√âDITOS</button>
        <button class="btn-menu" onclick="salirJuego()">SALIR</button>
    </div>

    <!-- MODALES -->
    <div id="tutorial" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="cerrarModal('tutorial')">&times;</span>
            <h2>üéÆ TUTORIAL</h2>
            <p><strong>Objetivo:</strong> ¬°Ser el jugador con m√°s puntos salvando ajolotes!</p>
            <p><strong>Recoge cartas, gana basura, compra en la tiendita y pesca fichas de ajolotes.</strong></p>
            <p><strong>¬°Gana quien tenga m√°s puntos al final!</strong></p>
        </div>
    </div>

    <div id="creditos" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="cerrarModal('creditos')">&times;</span>
            <h2>üë• CR√âDITOS</h2>
            <p><strong>Desarrollado por:</strong><br>Equipo Axolotl Panic</p>
            <p><strong>Para salvar a los ajolotes</strong><br>ü¶éüíñ</p>
        </div>
    </div>

    <!-- PANTALLA DE JUEGO -->
    <div id="game">
        <div class="timer" id="timer">8s ‚è≥</div>
        <button id="salir-juego" class="btn-accion" onclick="salirAJuego()">üè† Salir al Men√∫</button>

        <div class="jugadores" id="jugadores"></div>

        <div class="turno-indicator" id="turno-indicator">¬°Prep√°rate!</div>

        <div class="acciones" id="acciones"></div>

        <div class="cartas-almacenadas" id="cartas-almacenadas">
            <h3>üìú Cartas Almacenadas (Haz clic para usar):</h3>
            <div class="cartas-grid" id="cartas-grid"></div>
        </div>

        <div class="fichas-container">
            <h3>ü¶é Fichas de Ajolotes</h3>
            <div class="fichas-grid" id="fichas-grid"></div>
        </div>
    </div>

    <!-- MODAL TIENDA -->
    <div id="tienda" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="cerrarTienda()">&times;</span>
            <h2>üõí LA TIENDITA</h2>
            <div id="tienda-items"></div>
            <button class="btn-accion" onclick="cerrarTienda()">Salir</button>
        </div>
    </div>

    <!-- MODAL PESCAR -->
    <div id="pescar-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="cerrarPesca()">&times;</span>
            <h2>üé£ ¬°HORA DE PESCAR!</h2>
            <p>Elige una ficha:</p>
            <div id="pescar-fichas" class="fichas-grid"></div>
            <button class="btn-accion" id="aceptar-pesca" onclick="confirmarPesca()" disabled>Aceptar</button>
        </div>
    </div>

    <!-- FIN DEL JUEGO -->
    <div id="fin">
        <div class="ranking">
            <h2 id="titulo-fin">¬°JUEGO TERMINADO!</h2>
            <div id="ranking-list"></div>
            <button class="btn-menu" onclick="reiniciarJuego()">Volver al Men√∫</button>
        </div>
    </div>

    <script>
        // ESTADO DEL JUEGO
        let juego = {
            jugadores: ['T√∫', 'Bot 1', 'Bot 2', 'Bot 3'],
            datos: [
                {basura: 0, puntos: 0, fichas: [], cartas: [], turnoPerdido: false},
                {basura: 0, puntos: 0, fichas: [], cartas: [], turnoPerdido: false},
                {basura: 0, puntos: 0, fichas: [], cartas: [], turnoPerdido: false},
                {basura: 0, puntos: 0, fichas: [], cartas: [], turnoPerdido: false}
            ],
            turnoActual: 0,
            direccionTurno: 1,
            turnosTotales: 0,
            fichasDisponibles: [],
            mazo: [],
            cartaActual: null,
            timerInterval: null,
            tiempoRestante: 8,
            juegoTerminado: false
        };

        // TIPOS DE FICHAS (4 de cada tipo)
        const TIPOS_FICHAS = ['rosa', 'cafe', 'amarilla', 'rosa', 'cafe', 'amarilla', 'rosa', 'cafe', 'amarilla', 'rosa', 'cafe', 'amarilla'];

        // VALORES DE FICHAS
        const VALOR_FICHA = {
            rosa: 0.5,
            cafe: 1,
            amarilla: 1.5
        };

        // OBJETOS TIENDA
        const OBJETOS_TIENDA = [
            {nombre: 'Comida B√°sica', costo: 3, puntos: 1},
            {nombre: 'Comida Premium', costo: 7, puntos: 2},
            {nombre: 'Comida Deluxe', costo: 12, puntos: 4}
        ];

        // TIPOS DE CARTAS
        const TIPOS_CARTAS = [
            {nombre: 'Basura +1', tipo: 'basura', valor: 1, probabilidad: 0.3},
            {nombre: 'Basura +2', tipo: 'basura', valor: 2, probabilidad: 0.25},
            {nombre: 'Basura +3', tipo: 'basura', valor: 3, probabilidad: 0.25},
            {nombre: 'Robo-Basura', tipo: 'robo', probabilidad: 0.05},
            {nombre: 'Hora de Pescar', tipo: 'pescar', probabilidad: 0.05},
            {nombre: 'Intercambio de Ajolotes', tipo: 'intercambio', probabilidad: 0.03},
            {nombre: 'Duelo de Perder Turno', tipo: 'duelo', probabilidad: 0.03},
            {nombre: 'Rotaci√≥n de Basura', tipo: 'rotacion', probabilidad: 0.02},
            {nombre: 'Cambio de Rotaci√≥n', tipo: 'cambio', probabilidad: 0.02}
        ];

        // INICIALIZAR JUEGO
        function iniciarJuego() {
            document.getElementById('menu').style.display = 'none';
            document.getElementById('game').style.display = 'block';
            
            // Resetear estado
            juego.datos = juego.datos.map(() => ({basura: 0, puntos: 0, fichas: [], cartas: [], turnoPerdido: false}));
            juego.turnoActual = 0;
            juego.direccionTurno = 1;
            juego.turnosTotales = 0;
            juego.juegoTerminado = false;
            
            // Crear fichas
            crearFichas();
            barajarMazo();
            
            actualizarTodo();
            siguienteTurno();
        }

        function crearFichas() {
            juego.fichasDisponibles = [...TIPOS_FICHAS];
            juego.fichasDisponibles.sort(() => Math.random() - 0.5);
        }

        function barajarMazo() {
            juego.mazo = [...TIPOS_CARTAS];
            // Duplicar mazo para m√°s rondas
            juego.mazo = juego.mazo.concat(juego.mazo);
            juego.mazo.sort(() => Math.random() - 0.5);
        }

        function siguienteTurno() {
            if (juego.juegoTerminado) return;

            // Verificar turno perdido
            if (juego.datos[juego.turnoActual].turnoPerdido) {
                juego.datos[juego.turnoActual].turnoPerdido = false;
                alert(`${juego.jugadores[juego.turnoActual]} perdi√≥ su turno`);
                avanzarTurno();
                return;
            }

            juego.turnosTotales++;
            actualizarTurnoUI();
            
            if (juego.turnoActual === 0) {
                // Turno humano
                inicioTurnoHumano();
            } else {
                // Turno bot
                setTimeout(() => botActua(), 2000);
            }
        }

        function inicioTurnoHumano() {
            juego.tiempoRestante = 8;
            iniciarTimer();
            mostrarBotones(['recoger']);
        }

        function botActua() {
            const botIdx = juego.turnoActual;
            const bot = juego.datos[botIdx];
            
            // Estrategia del bot
            if (bot.cartas.length >= 5) {
                // Debe usar carta almacenada
                usarCartaAlmacenada(botIdx, 0);
            } else if (bot.basura >= 7 && liderando() < botIdx) {
                // Comprar en tienda si va perdiendo
                abrirTienda(botIdx);
            } else {
                // Recoger nueva carta
                recogerCartaBot(botIdx);
            }
        }

        function recogerCartaBot(botIdx) {
            const carta = juego.mazo.pop();
            if (!carta) barajarMazo();
            
            if (botIdx.cartas.length < 5) {
                botIdx.cartas.push(carta);
            } else {
                aplicarCarta(botIdx, carta);
            }
            
            setTimeout(() => avanzarTurno(), 1500);
        }

        // EVENTOS DE BOTONES
        function mostrarBotones(tipos) {
            const container = document.getElementById('acciones');
            container.innerHTML = '';
            
            if (tipos.includes('recoger')) {
                const btn = document.createElement('button');
                btn.className = 'btn-accion';
                btn.textContent = 'Recoger Carta Nueva';
                btn.onclick = recogerCartaHumano;
                container.appendChild(btn);
            }
            
            if (tipos.includes('aplicar')) {
                const aplicar = document.createElement('button');
                aplicar.className = 'btn-accion';
                aplicar.textContent = 'Aplicar Carta Nueva';
                aplicar.onclick = aplicarCartaNueva;
                container.appendChild(aplicar);
                
                const almacenar = document.createElement('button');
                almacenar.className = 'btn-accion';
                almacenar.textContent = 'Almacenar Carta Nueva';
                almacenar.onclick = almacenarCartaNueva;
                container.appendChild(almacenar);
            }
            
            // Siempre mostrar finalizar y tienda
            const finalizar = document.createElement('button');
            finalizar.className = 'btn-accion';
            finalizar.textContent = 'Finalizar Turno';
            finalizar.onclick = finalizarTurno;
            container.appendChild(finalizar);
            
            const tienda = document.createElement('button');
            tienda.className = 'btn-accion';
            tienda.textContent = 'üõí Ir a La Tiendita';
            tienda.onclick = () => abrirTienda(0);
            container.appendChild(tienda);
        }

        function recogerCartaHumano() {
            clearInterval(juego.timerInterval);
            const carta = juego.mazo.pop();
            if (!carta) barajarMazo();
            
            juego.cartaActual = carta;
            alert(`Sacaste: ${carta.nombre}`);
            mostrarBotones(['aplicar']);
        }

        function aplicarCartaNueva() {
            aplicarCarta(0, juego.cartaActual);
            juego.cartaActual = null;
            mostrarBotones(['finalizar']);
        }

        function almacenarCartaNueva() {
            if (juego.datos[0].cartas.length < 5) {
                juego.datos[0].cartas.push(juego.cartaActual);
                juego.cartaActual = null;
                actualizarCartasAlmacenadas();
                mostrarBotones(['finalizar']);
            } else {
                alert('¬°Inventario lleno! M√°ximo 5 cartas.');
            }
        }

        function finalizarTurno() {
            clearInterval(juego.timerInterval);
            avanzarTurno();
        }

        function avanzarTurno() {
            juego.turnoActual = (juego.turnoActual + juego.direccionTurno + 4) % 4;
            siguienteTurno();
        }

        // APLICAR CARTAS
        function aplicarCarta(jugadorIdx, carta) {
            switch(carta.tipo) {
                case 'basura':
                    juego.datos[jugadorIdx].basura += carta.valor;
                    alert(`+${carta.valor} basura`);
                    break;
                    
                case 'robo':
                    roboBasura(jugadorIdx);
                    break;
                    
                case 'pescar':
                    abrirModalPesca(jugadorIdx);
                    break;
                    
                case 'intercambio':
                    intercambioAjolotes(jugadorIdx);
                    break;
                    
                case 'duelo':
                    dueloPerderTurno(jugadorIdx);
                    break;
                    
                case 'rotacion':
                    rotacionBasura();
                    break;
                    
                case 'cambio':
                    juego.direccionTurno *= -1;
                    alert('¬°Orden de turnos invertido!');
                    break;
            }
            actualizarTodo();
        }

        function usarCartaAlmacenada(jugadorIdx, cartaIdx) {
            const carta = juego.datos[jugadorIdx].cartas[cartaIdx];
            juego.datos[jugadorIdx].cartas.splice(cartaIdx, 1);
            aplicarCarta(jugadorIdx, carta);
            actualizarCartasAlmacenadas();
        }

        // FUNCIONES ESPEC√çFICAS DE CARTAS
        function roboBasura(jugadorIdx) {
            const dado = Math.floor(Math.random() * 6) + 1;
            const objetivoIdx = Math.floor(Math.random() * 3) + 1; // No se roba a s√≠ mismo
            const robo = Math.min(dado, juego.datos[objetivoIdx].basura);
            
            juego.datos[jugadorIdx].basura += robo;
            juego.datos[objetivoIdx].basura -= robo;
            
            alert(`¬°Robaste ${robo} basura a ${juego.jugadores[objetivoIdx]}!`);
        }

        function abrirModalPesca(jugadorIdx) {
            document.getElementById('pescar-modal').style.display = 'flex';
            const container = document.getElementById('pescar-fichas');
            container.innerHTML = '';
            
            juego.fichasDisponibles.forEach((tipo, idx) => {
                const ficha = document.createElement('div');
                ficha.className = `ficha ficha-gris`;
                ficha.dataset.idx = idx;
                ficha.onclick = () => seleccionarFichaPesca(ficha);
                ficha.textContent = '?';
                container.appendChild(ficha);
            });
            
            juego.pescadorActual = jugadorIdx;
        }

        function seleccionarFichaPesca(ficha) {
            document.querySelectorAll('#pescar-fichas .ficha').forEach(f => 
                f.classList.remove('seleccionada')
            );
            ficha.classList.add('seleccionada');
            document.getElementById('aceptar-pesca').disabled = false;
            juego.fichaSeleccionada = parseInt(ficha.dataset.idx);
        }

        function confirmarPesca() {
            const tipo = juego.fichasDisponibles[juego.fichaSeleccionada];
            const puntos = VALOR_FICHA[tipo];
            
            juego.datos[juego.pescadorActual].puntos += puntos;
            juego.datos[juego.pescadorActual].fichas.push(tipo);
            juego.fichasDisponibles.splice(juego.fichaSeleccionada, 1);
            
            alert(`¬°Pescaste ficha ${tipo.toUpperCase()}! +${puntos} puntos`);
            cerrarPesca();
            verificarFinJuego();
        }

        // ... (resto de funciones implementadas de manera similar)

        // ACTUALIZAR UI
        function actualizarTodo() {
            actualizarJugadores();
            actualizarFichas();
            actualizarCartasAlmacenadas();
        }

        function actualizarJugadores() {
            const container = document.getElementById('jugadores');
            container.innerHTML = '';
            
            juego.jugadores.forEach((nombre, idx) => {
                const box = document.createElement('div');
                box.className = `jugador-box jugador-${idx === 0 ? 'tu' : 'bot'}`;
                if (idx === juego.turnoActual) box.classList.add('jugador-activo');
                
                const fichasValor = juego.datos[idx].fichas.reduce((sum, f) => sum + VALOR_FICHA[f], 0);
                
                box.innerHTML = `
                    <div class="jugador-nombre">${nombre}</div>
                    <div class="jugador-stat">üóëÔ∏è Basura: ${juego.datos[idx].basura}</div>
                    <div class="jugador-stat">‚≠ê Puntaje: ${juego.datos[idx].puntos.toFixed(1)}</div>
                    <div class="jugador-stat">ü¶é Fichas: ${fichasValor.toFixed(1)}</div>
                    <div class="jugador-stat">üìú Cartas: ${juego.datos[idx].cartas.length}</div>
                `;
                container.appendChild(box);
            });
        }

        // TIMER
        function iniciarTimer() {
            juego.timerInterval = setInterval(() => {
                juego.tiempoRestante--;
                document.getElementById('timer').textContent = `${juego.tiempoRestante}s ‚è≥`;
                
                if (juego.tiempoRestante <= 3) {
                    document.getElementById('timer').classList.add('timer-critico');
                }
                
                if (juego.tiempoRestante <= 0) {
                    clearInterval(juego.timerInterval);
                    alert('¬°Tiempo agotado!');
                    finalizarTurno();
                }
            }, 1000);
        }

        function verificarFinJuego() {
            if (juego.fichasDisponibles.length === 0 || juego.turnosTotales >= 30) {
                juego.juegoTerminado = true;
                mostrarRanking();
            }
        }

        function mostrarRanking() {
            document.getElementById('game').style.display = 'none';
            document.getElementById('fin').style.display = 'flex';
            
            const ranking = juego.datos.map((data, idx) => ({
                ...data,
                idx,
                nombre: juego.jugadores[idx]
            })).sort((a, b) => b.puntos - a.puntos);
            
            const container = document.getElementById('ranking-list');
            container.innerHTML = '';
            
            ranking.forEach((jugador, pos) => {
                const item = document.createElement('div');
                item.className = `ranking-item ${pos === 0 ? 'ganador' : ''}`;
                item.textContent = `${pos + 1}. ${jugador.nombre} ‚Äî ${jugador.puntos.toFixed(1)} puntos`;
                container.appendChild(item);
            });
        }

        // FUNCIONES DE MODALES
        function mostrarTutorial() {
            document.getElementById('tutorial').style.display = 'flex';
        }

        function mostrarCreditos() {
            document.getElementById('creditos').style.display = 'flex';
        }

        function cerrarModal(id) {
            document.getElementById(id).style.display = 'none';
        }

        function salirJuego() {
            if (confirm('¬øSeguro que quieres salir?')) {
                window.close();
            }
        }

        function reiniciarJuego() {
            document.getElementById('fin').style.display = 'none';
            document.getElementById('menu').style.display = 'flex';
        }

        // Inicializaci√≥n
        window.onload = () => {
            actualizarTodo();
        };
    </script>
</body>
</html>